<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Generate IKFast solver with OpenRAVE built from source</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ct_logo_small.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">- 3.0.1 Documentation</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="../../../ct_core/doc/html/index.html"><span>Core&#160;module</span></a></li>
      <li><a href="../../../ct_optcon/doc/html/index.html"><span>Optimal&#160;Control</span></a></li>
      <li><a href="../../../ct_rbd/doc/html/index.html"><span>Robot&#160;Module</span></a></li>
      <li><a href="../../../ct_models/doc/html/index.html"><span>Models</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ik_tut_local.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Generate IKFast solver with OpenRAVE built from source </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#ik_tut_local_step1">Building OpenRAVE from source</a></li>
<li class="level1"><a href="#ik_tut_local_step2">Generating the solver</a></li>
</ul>
</div>
<div class="textblock"><p>Here we shall set up the IKFast by building OpenRAVE from source.</p>
<h1><a class="anchor" id="ik_tut_local_step1"></a>
Building OpenRAVE from source</h1>
<p>A simple way to do that is to run the <a href="https://hub.docker.com/r/hamzamerzic/openrave/">commands</a> used to generate the Docker image from the previous section. By doing that we get the following list of commands (as per instructions on the page)</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo apt-get install libbullet-dev libode-dev liblapack-dev python-scipy libfcl-dev</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;sudo pip uninstall mpmath</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;sudo pip install sympy==0.7.1</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;git clone https://github.com/rdiankov/openrave.git</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;sudo apt-get install &quot;collada-dom2.4-dp*&quot; libsoqt4-dev</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;cd openrave/</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;mkdir build &amp;&amp; cd build</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;cmake ..</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;make -j</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;sudo make install</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;cd</div></div><!-- fragment --><p>To test if our setup works do</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;python -c &#39;import openravepy; print openravepy.__version__&#39;</div></div><!-- fragment --><p>which should give "0.9.0" as output. Make sure you leave the build directory of OpenRAVE, otherwise an importing error might occur.</p>
<p>Now that OpenRAVE is set up, we can generate the solver.</p>
<h1><a class="anchor" id="ik_tut_local_step2"></a>
Generating the solver</h1>
<p>To generate the IKFast solver, make sure you have the DAE or URDF file of your robot. In case you only have a URDF file, an intermediate step needs to be done in order to convert it to DAE. To do that, make sure you have ROS and ros-&lt;ros_version&gt;-collada-urdf package installed and run</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;rosrun collada_urdf urdf_to_collada &lt;robot_urdf&gt; robot_full.dae</div></div><!-- fragment --><p>Optionally, you can round the floating numbers in the DAE file for better numeric stability. To do that simply run</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;rosrun moveit_kinematics round_collada_numbers.py robot_full.dae robot.dae 6</div></div><!-- fragment --><p>Here 6 specifies the number of decimal places we wish to keep. You can experiment with the precision. In the next steps we assume that the robot file is called robot.dae.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd &lt;path_to_robot_file_directory&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;openrave-robot.py robot.dae --info links</div></div><!-- fragment --><p>As output you should get something like</p>
<div class="fragment"><div class="line">name   index parents</div><div class="line">--------------------</div><div class="line">link_0 0</div><div class="line">link_1 1     link_0</div><div class="line">link_2 2     link_1</div><div class="line">link_3 3     link_2</div><div class="line">link_4 4     link_3</div><div class="line">link_5 5     link_4</div><div class="line">link_6 6     link_5</div><div class="line">--------------------</div><div class="line">name   index parents</div></div><!-- fragment --><p>The important things to look for are the indices as we need them in order to specify from which to which link to calculate the inverse kinematics. In case the indices are not showing, you should consult with the FAQ.</p>
<p>Now that we know which indices correspond to the base link and to the end effector link, we can continue with generating the solver. To do that simply run</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd &lt;path_to_robot_file_directory&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;`openrave-config --python-dir`/openravepy/_openravepy_/ikfast.py --robot=robot.dae --iktype=transform6d --baselink=0 --eelink=6 --savefile=custom_ik.cpp</div></div><!-- fragment --><p>Here we assumed that the baselink and end effector links are 0 and 6, respectively. For the inverse kinematics type, we used the full Transform6D inverse kinematics, but other options are also <a href="http://openrave.org/docs/latest_stable/openravepy/ikfast">available</a>.</p>
<p>Now that we have the solver in place we can move on to the <a class="el" href="ik_implement.html">Build IKFast library</a> page. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="ik_tutorials.html">Inverse Kinematics Tutorials</a></li>
    <li class="footer">Generated on Sun May 12 2019 22:19:05 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
