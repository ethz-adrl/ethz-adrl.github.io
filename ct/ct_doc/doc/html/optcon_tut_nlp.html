<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Simple Examples for Nonlinear Programming</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ct_logo_small.png"/></td>
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">- 3.0.2 Documentation</div>
    </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('optcon_tut_nlp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Simple Examples for Nonlinear Programming </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section note"><dt>Note</dt><dd>these examples show how to set up a very simple nonlinear program and solve it using IPOPT.</dd></dl>
<div class="fragment"><div class="line"><span class="comment">/**********************************************************************************************************************</span></div><div class="line"><span class="comment">This file is part of the Control Toolbox (https://github.com/ethz-adrl/control-toolbox), copyright by ETH Zurich.</span></div><div class="line"><span class="comment">Licensed under the BSD-2 license (see LICENSE file in main directory)</span></div><div class="line"><span class="comment">**********************************************************************************************************************/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;ct/optcon/nlp/Nlp&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/namespacect_1_1optcon.html">ct::optcon</a>;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> SCALAR&gt;</div><div class="line"><span class="keyword">class </span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraints.html">ExampleConstraints</a> final : <span class="keyword">public</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1DiscreteConstraintBase.html">tpl::DiscreteConstraintBase</a>&lt;SCALAR&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="line">    <span class="keyword">using</span> VectorXs = Eigen::Matrix&lt;SCALAR, Eigen::Dynamic, 1&gt;;</div><div class="line"></div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraints.html">ExampleConstraints</a>(std::shared_ptr&lt;<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1OptVector.html">tpl::OptVector&lt;SCALAR&gt;</a>&gt; optVector) : optVector_(optVector)</div><div class="line">    {</div><div class="line">        lowerBounds_(0) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(0.0);</div><div class="line">        lowerBounds_(1) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(0.0);</div><div class="line">        lowerBounds_(2) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(1.0);</div><div class="line"></div><div class="line">        upperBounds_(0) = std::numeric_limits&lt;SCALAR&gt;::max();</div><div class="line">        upperBounds_(1) = std::numeric_limits&lt;SCALAR&gt;::max();</div><div class="line">        upperBounds_(2) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(2.0);</div><div class="line">    }</div><div class="line"></div><div class="line">    ~<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraints.html">ExampleConstraints</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div><div class="line"></div><div class="line">    VectorXs getLowerBound()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> lowerBounds_; }</div><div class="line">    VectorXs getUpperBound()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> upperBounds_; }</div><div class="line">    VectorXs eval()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        constraints_.setZero();</div><div class="line"></div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x1 = optVector_-&gt;getOptimizationVars()(0);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x2 = optVector_-&gt;getOptimizationVars()(1);</div><div class="line"></div><div class="line">        constraints_(0) = x1;</div><div class="line">        constraints_(1) = x2;</div><div class="line">        constraints_(2) = x1 * x1 + x2 * x2;</div><div class="line">        <span class="keywordflow">return</span> constraints_;</div><div class="line">    }</div><div class="line"></div><div class="line">    VectorXs evalSparseJacobian()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x1 = optVector_-&gt;getOptimizationVars()(0);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x2 = optVector_-&gt;getOptimizationVars()(1);</div><div class="line"></div><div class="line">        jacobian_.setZero();</div><div class="line">        jacobian_(0) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(1.0);</div><div class="line">        jacobian_(1) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(1.0);</div><div class="line">        jacobian_(2) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(2.0 * x1);</div><div class="line">        jacobian_(3) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(2.0 * x2);</div><div class="line">        <span class="keywordflow">return</span> jacobian_;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">size_t</span> getConstraintSize()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> 3; }</div><div class="line">    <span class="keywordtype">size_t</span> getNumNonZerosJacobian()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> 4; }</div><div class="line">    <span class="keywordtype">void</span> genSparsityPattern(Eigen::VectorXi&amp; iRow_vec, Eigen::VectorXi&amp; jCol_vec)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        iRow_vec(0) = 0;</div><div class="line">        iRow_vec(1) = 1;</div><div class="line">        iRow_vec(2) = 2;</div><div class="line">        iRow_vec(3) = 2;</div><div class="line"></div><div class="line">        jCol_vec(0) = 0;</div><div class="line">        jCol_vec(1) = 1;</div><div class="line">        jCol_vec(2) = 0;</div><div class="line">        jCol_vec(3) = 1;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * When we write down the three sub-hessian for this constraints we see H1 = 0, H2 = 0 and</span></div><div class="line"><span class="comment">     * H3 = [2 0; 0 2].</span></div><div class="line"><span class="comment">     *</span></div><div class="line"><span class="comment">     * \note this function implementation is only required for the exact-hessian solver case</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keywordtype">void</span> sparseHessianValues(<span class="keyword">const</span> Eigen::VectorXd&amp; optVec,</div><div class="line">        <span class="keyword">const</span> Eigen::VectorXd&amp; lambda,</div><div class="line">        Eigen::VectorXd&amp; sparseHes)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        sparseHes.resize(2);</div><div class="line">        sparseHes.setConstant(lambda(2) * 2.0);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">     * generate block-diagonal sparsity pattern</span></div><div class="line"><span class="comment">     * \note this function implementation is only required for the exact-hessian solver case</span></div><div class="line"><span class="comment">     */</span></div><div class="line">    <span class="keywordtype">void</span> genSparsityPatternHessian(Eigen::VectorXi&amp; iRow_vec, Eigen::VectorXi&amp; jCol_vec)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        iRow_vec.resize(2);</div><div class="line">        jCol_vec.resize(2);</div><div class="line">        iRow_vec(0) = 0;</div><div class="line">        jCol_vec(0) = 0;</div><div class="line">        iRow_vec(1) = 1;</div><div class="line">        jCol_vec(1) = 1;</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    std::shared_ptr&lt;tpl::OptVector&lt;SCALAR&gt;&gt; optVector_;</div><div class="line">    Eigen::Matrix&lt;SCALAR, 4, 1&gt; jacobian_;</div><div class="line">    Eigen::Matrix&lt;SCALAR, 3, 1&gt; constraints_;</div><div class="line">    Eigen::Matrix&lt;SCALAR, 3, 1&gt; lowerBounds_;  <span class="comment">// lower bound</span></div><div class="line">    Eigen::Matrix&lt;SCALAR, 3, 1&gt; upperBounds_;  <span class="comment">// upper bound</span></div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> SCALAR&gt;</div><div class="line"><span class="keyword">class </span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleCostEvaluator.html">ExampleCostEvaluator</a> final : <span class="keyword">public</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1DiscreteCostEvaluatorBase.html">tpl::DiscreteCostEvaluatorBase</a>&lt;SCALAR&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleCostEvaluator.html">ExampleCostEvaluator</a>(std::shared_ptr&lt;<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1OptVector.html">tpl::OptVector&lt;SCALAR&gt;</a>&gt; optVector) : optVector_(optVector) {}</div><div class="line">    ~<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleCostEvaluator.html">ExampleCostEvaluator</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div><div class="line"></div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> eval()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x1 = optVector_-&gt;getOptimizationVars()(0);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x2 = optVector_-&gt;getOptimizationVars()(1);</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> -<span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(x1 + x2);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> evalGradient(<span class="keywordtype">size_t</span> grad_length, Eigen::Map&lt;Eigen::Matrix&lt;SCALAR, Eigen::Dynamic, 1&gt;&gt;&amp; grad)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        grad.resize(grad_length);</div><div class="line">        grad(0) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(-1.0);</div><div class="line">        grad(1) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(-1.0);</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line"><span class="comment">    * \note this function implementation is only required for the exact-hessian solver case</span></div><div class="line"><span class="comment">    */</span></div><div class="line">    <span class="keywordtype">void</span> getSparsityPatternHessian(Eigen::VectorXi&amp; iRow, Eigen::VectorXi&amp; jCol)<span class="keyword"> override </span>{ <span class="comment">/* do nothing */</span>}</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> sparseHessianValues(<span class="keyword">const</span> Eigen::VectorXd&amp; optVec,</div><div class="line">        <span class="keyword">const</span> Eigen::VectorXd&amp; lambda,</div><div class="line">        Eigen::VectorXd&amp; hes)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="comment">/* do nothing, Hessian is all zero */</span></div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    std::shared_ptr&lt;tpl::OptVector&lt;SCALAR&gt;&gt; optVector_;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> SCALAR&gt;</div><div class="line"><span class="keyword">class </span>ExampleConstraintsContainer final : <span class="keyword">public</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1DiscreteConstraintContainerBase.html">tpl::DiscreteConstraintContainerBase</a>&lt;SCALAR&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="line">    ExampleConstraintsContainer(std::shared_ptr&lt;<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1OptVector.html">tpl::OptVector&lt;SCALAR&gt;</a>&gt; optVector) : optVector_(optVector)</div><div class="line">    {</div><div class="line">        <span class="keyword">auto</span> exampleConstraints =</div><div class="line">            std::shared_ptr&lt;ExampleConstraints&lt;SCALAR&gt;&gt;(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraints.html">ExampleConstraints&lt;SCALAR&gt;</a>(optVector_));</div><div class="line">        this-&gt;constraints_.push_back(exampleConstraints);</div><div class="line">    }</div><div class="line">    ~ExampleConstraintsContainer() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> prepareEvaluation()<span class="keyword"> override </span>{ <span class="comment">/* do nothing*/</span>}</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> prepareJacobianEvaluation()<span class="keyword"> override </span>{ <span class="comment">/* do nothing*/</span>}</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    std::shared_ptr&lt;tpl::OptVector&lt;SCALAR&gt;&gt; optVector_;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> SCALAR&gt;</div><div class="line"><span class="keyword">class </span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleProblem.html">ExampleProblem</a> final : <span class="keyword">public</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1Nlp.html">tpl::Nlp</a>&lt;SCALAR&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleProblem.html">ExampleProblem</a>()</div><div class="line">    {</div><div class="line">        this-&gt;optVariables_ = std::shared_ptr&lt;tpl::OptVector&lt;SCALAR&gt;&gt;(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1OptVector.html">tpl::OptVector&lt;SCALAR&gt;</a>(2));</div><div class="line"></div><div class="line">        this-&gt;optVariables_-&gt;setZero();</div><div class="line"></div><div class="line">        this-&gt;costEvaluator_ =</div><div class="line">            std::shared_ptr&lt;ExampleCostEvaluator&lt;SCALAR&gt;&gt;(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleCostEvaluator.html">ExampleCostEvaluator&lt;SCALAR&gt;</a>(this-&gt;optVariables_));</div><div class="line"></div><div class="line">        this-&gt;constraints_ = std::shared_ptr&lt;ExampleConstraintsContainer&lt;SCALAR&gt;&gt;(</div><div class="line">            <span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraintsContainer.html">ExampleConstraintsContainer&lt;SCALAR&gt;</a>(this-&gt;optVariables_));</div><div class="line">    }</div><div class="line"></div><div class="line">    ~<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleProblem.html">ExampleProblem</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> updateProblem()<span class="keyword"> override </span>{ <span class="comment">/* do nothing */</span>}</div><div class="line"></div><div class="line">    Eigen::VectorXd getSolution() { <span class="keywordflow">return</span> this-&gt;optVariables_-&gt;getOptimizationVars(); }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_core.tag:../../ct_core/doc/html/" href="../../ct_core/doc/html/CMakeCXXCompilerId_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">    <span class="comment">// create problems</span></div><div class="line">    std::shared_ptr&lt;ExampleProblem&lt;double&gt;&gt; problem1(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleProblem.html">ExampleProblem&lt;double&gt;</a>());</div><div class="line">    std::shared_ptr&lt;ExampleProblem&lt;double&gt;&gt; problem2(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleProblem.html">ExampleProblem&lt;double&gt;</a>());</div><div class="line"></div><div class="line">    <span class="comment">// settings for exact Hessian solver</span></div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html">NlpSolverSettings</a> solverSettings1;</div><div class="line">    solverSettings1.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html#a562ddac0ce47a1b5909a73207a0daa60">solverType_</a> = <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/namespacect_1_1optcon.html#a656a888ffbea3e808f3c80425632ef10a6b93b108ba2eb6ad8ff0473e877e8a66">NlpSolverType::IPOPT</a>;</div><div class="line">    solverSettings1.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html#a3e6de51fa3c9a707a8bc9f2a52d026db">ipoptSettings_</a>.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1IpoptSettings.html#ab91f9329f297495215f335152733ccbd">derivativeTest_</a> = <span class="stringliteral">&quot;second-order&quot;</span>;</div><div class="line">    solverSettings1.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html#a3e6de51fa3c9a707a8bc9f2a52d026db">ipoptSettings_</a>.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1IpoptSettings.html#af88aa103cf1dab27f5776c0dfe29e13f">hessian_approximation_</a> = <span class="stringliteral">&quot;exact&quot;</span>;</div><div class="line"></div><div class="line">    <span class="comment">// create exact-Hessian solver and solve</span></div><div class="line">    std::shared_ptr&lt;NlpSolver&gt; nlpSolver1(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/namespacect_1_1optcon.html#ad3b07bbf23640e1a22ec0cd7f0da11d7">IpoptSolver</a>(problem1, solverSettings1));</div><div class="line">    nlpSolver1-&gt;solve();</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Solution: &quot;</span> &lt;&lt; problem1-&gt;getSolution().transpose() &lt;&lt; std::endl;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// settings for Hessian approximation solver</span></div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html">NlpSolverSettings</a> solverSettings2;</div><div class="line">    solverSettings2.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html#a562ddac0ce47a1b5909a73207a0daa60">solverType_</a> = <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/namespacect_1_1optcon.html#a656a888ffbea3e808f3c80425632ef10a6b93b108ba2eb6ad8ff0473e877e8a66">NlpSolverType::IPOPT</a>;</div><div class="line">    solverSettings2.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html#a3e6de51fa3c9a707a8bc9f2a52d026db">ipoptSettings_</a>.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1IpoptSettings.html#af88aa103cf1dab27f5776c0dfe29e13f">hessian_approximation_</a> = <span class="stringliteral">&quot;limited-memory&quot;</span>;</div><div class="line"></div><div class="line">    <span class="comment">// create approximate-Hessian solver and solve</span></div><div class="line">    std::shared_ptr&lt;NlpSolver&gt; nlpSolver2(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/namespacect_1_1optcon.html#ad3b07bbf23640e1a22ec0cd7f0da11d7">IpoptSolver</a>(problem2, solverSettings2));</div><div class="line">    nlpSolver2-&gt;solve();</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Solution: &quot;</span> &lt;&lt; problem2-&gt;getSolution().transpose() &lt;&lt; std::endl;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>You can run this example with the following command </p><div class="fragment"><div class="line">rosrun ct_optcon ex_Nlp_2D</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="comment">/**********************************************************************************************************************</span></div><div class="line"><span class="comment">This file is part of the Control Toolbox (https://github.com/ethz-adrl/control-toolbox), copyright by ETH Zurich.</span></div><div class="line"><span class="comment">Licensed under the BSD-2 license (see LICENSE file in main directory)</span></div><div class="line"><span class="comment">**********************************************************************************************************************/</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;ct/optcon/nlp/Nlp&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/namespacect_1_1optcon.html">ct::optcon</a>;</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> SCALAR&gt;</div><div class="line"><span class="keyword">class </span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraints.html">ExampleConstraints</a> final : <span class="keyword">public</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1DiscreteConstraintBase.html">tpl::DiscreteConstraintBase</a>&lt;SCALAR&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="line">    <span class="keyword">using</span> VectorXs = Eigen::Matrix&lt;SCALAR, Eigen::Dynamic, 1&gt;;</div><div class="line"></div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> dimConstraints = 2;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> nnzJac = 6;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> nnzHes = 3;  <span class="comment">// (triangular view)</span></div><div class="line"></div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraints.html">ExampleConstraints</a>(std::shared_ptr&lt;<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1OptVector.html">tpl::OptVector&lt;SCALAR&gt;</a>&gt; optVector) : optVector_(optVector)</div><div class="line">    {</div><div class="line">        lowerBounds_(0) = std::numeric_limits&lt;SCALAR&gt;::min();</div><div class="line">        lowerBounds_(1) = std::numeric_limits&lt;SCALAR&gt;::min();</div><div class="line"></div><div class="line">        upperBounds_(0) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(2.0);</div><div class="line">        upperBounds_(1) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(10.0);</div><div class="line">    }</div><div class="line"></div><div class="line">    ~<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraints.html">ExampleConstraints</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div><div class="line"></div><div class="line">    VectorXs getLowerBound()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> lowerBounds_; }</div><div class="line">    VectorXs getUpperBound()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> upperBounds_; }</div><div class="line">    VectorXs eval()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        constraints_.setZero();</div><div class="line"></div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x1 = optVector_-&gt;getOptimizationVars()(0);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x2 = optVector_-&gt;getOptimizationVars()(1);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x3 = optVector_-&gt;getOptimizationVars()(2);</div><div class="line"></div><div class="line">        constraints_(0) = x1 * x1 - x2 * x2 + x3 * x3;</div><div class="line">        constraints_(1) = x1 * x1 + x2 * x2 + x3 * x3;</div><div class="line">        <span class="keywordflow">return</span> constraints_;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">size_t</span> getConstraintSize()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> dimConstraints; }</div><div class="line">    <span class="keywordtype">size_t</span> getNumNonZerosJacobian()<span class="keyword"> override </span>{ <span class="keywordflow">return</span> nnzJac; }</div><div class="line">    <span class="keywordtype">void</span> genSparsityPattern(Eigen::VectorXi&amp; iRow_vec, Eigen::VectorXi&amp; jCol_vec)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        iRow_vec.resize(nnzJac);</div><div class="line">        jCol_vec.resize(nnzJac);</div><div class="line"></div><div class="line">        iRow_vec(0) = 0;</div><div class="line">        jCol_vec(0) = 0;</div><div class="line"></div><div class="line">        iRow_vec(1) = 0;</div><div class="line">        jCol_vec(1) = 1;</div><div class="line"></div><div class="line">        iRow_vec(2) = 0;</div><div class="line">        jCol_vec(2) = 2;</div><div class="line"></div><div class="line">        iRow_vec(3) = 1;</div><div class="line">        jCol_vec(3) = 0;</div><div class="line"></div><div class="line">        iRow_vec(4) = 1;</div><div class="line">        jCol_vec(4) = 1;</div><div class="line"></div><div class="line">        iRow_vec(5) = 1;</div><div class="line">        jCol_vec(5) = 2;</div><div class="line">    }</div><div class="line"></div><div class="line">    VectorXs evalSparseJacobian()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x1 = optVector_-&gt;getOptimizationVars()(0);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x2 = optVector_-&gt;getOptimizationVars()(1);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x3 = optVector_-&gt;getOptimizationVars()(2);</div><div class="line"></div><div class="line">        jacobian_.setZero();</div><div class="line">        jacobian_(0) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(2.0 * x1);</div><div class="line">        jacobian_(1) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(-2.0 * x2);</div><div class="line">        jacobian_(2) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(2.0 * x3);</div><div class="line">        jacobian_(3) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(2.0 * x1);</div><div class="line">        jacobian_(4) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(2.0 * x2);</div><div class="line">        jacobian_(5) = <span class="keyword">static_cast&lt;</span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a><span class="keyword">&gt;</span>(2.0 * x3);</div><div class="line">        <span class="keywordflow">return</span> jacobian_;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> genSparsityPatternHessian(Eigen::VectorXi&amp; iRow_vec, Eigen::VectorXi&amp; jCol_vec)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        iRow_vec.resize(nnzHes);</div><div class="line">        jCol_vec.resize(nnzHes);</div><div class="line">        iRow_vec(0) = 0;</div><div class="line">        jCol_vec(0) = 0;</div><div class="line">        iRow_vec(1) = 1;</div><div class="line">        jCol_vec(1) = 1;</div><div class="line">        iRow_vec(2) = 2;</div><div class="line">        jCol_vec(2) = 2;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> sparseHessianValues(<span class="keyword">const</span> Eigen::VectorXd&amp; optVec,</div><div class="line">        <span class="keyword">const</span> Eigen::VectorXd&amp; lambda,</div><div class="line">        Eigen::VectorXd&amp; sparseHes)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        Eigen::VectorXd h1, h2;</div><div class="line">        h1.resize(nnzHes);</div><div class="line">        h2.resize(nnzHes);</div><div class="line">        h1 &lt;&lt; 2.0, -2.0, 2.0;</div><div class="line">        h2 &lt;&lt; 2.0, 2.0, 2.0;</div><div class="line"></div><div class="line">        sparseHes = lambda(0) * h1 + lambda(1) * h2;</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    std::shared_ptr&lt;tpl::OptVector&lt;SCALAR&gt;&gt; optVector_;</div><div class="line">    Eigen::Matrix&lt;SCALAR, nnzJac, 1&gt; jacobian_;</div><div class="line">    Eigen::Matrix&lt;SCALAR, dimConstraints, 1&gt; constraints_;</div><div class="line">    Eigen::Matrix&lt;SCALAR, dimConstraints, 1&gt; lowerBounds_;</div><div class="line">    Eigen::Matrix&lt;SCALAR, dimConstraints, 1&gt; upperBounds_;</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> SCALAR&gt;</div><div class="line"><span class="keyword">class </span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleCostEvaluator.html">ExampleCostEvaluator</a> final : <span class="keyword">public</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1DiscreteCostEvaluatorBase.html">tpl::DiscreteCostEvaluatorBase</a>&lt;SCALAR&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> nnz_hessian = 2;  </div><div class="line"></div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleCostEvaluator.html">ExampleCostEvaluator</a>(std::shared_ptr&lt;<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1OptVector.html">tpl::OptVector&lt;SCALAR&gt;</a>&gt; optVector) : optVector_(optVector) {}</div><div class="line">    ~<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleCostEvaluator.html">ExampleCostEvaluator</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div><div class="line"></div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> eval()<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x1 = optVector_-&gt;getOptimizationVars()(0);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x2 = optVector_-&gt;getOptimizationVars()(1);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x3 = optVector_-&gt;getOptimizationVars()(2);</div><div class="line"></div><div class="line">        <span class="keywordflow">return</span> -(x1 * x2 + x2 * x3);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> evalGradient(<span class="keywordtype">size_t</span> grad_length, Eigen::Map&lt;Eigen::Matrix&lt;SCALAR, Eigen::Dynamic, 1&gt;&gt;&amp; grad)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x1 = optVector_-&gt;getOptimizationVars()(0);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x2 = optVector_-&gt;getOptimizationVars()(1);</div><div class="line">        <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_models.tag:../../../ct_models/doc/html/" href="../../../ct_models/doc/html/HyQLinearizationCodegen_8cpp.html#af771689630269df74521b7db6374a9af">SCALAR</a> x3 = optVector_-&gt;getOptimizationVars()(2);</div><div class="line"></div><div class="line">        grad.resize(grad_length);</div><div class="line">        grad(0) = -x2;</div><div class="line">        grad(1) = -x1 - x3;</div><div class="line">        grad(2) = -x2;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> getSparsityPatternHessian(Eigen::VectorXi&amp; iRow, Eigen::VectorXi&amp; jCol)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        iRow.resize(nnz_hessian);</div><div class="line">        jCol.resize(nnz_hessian);</div><div class="line"></div><div class="line">        iRow(0) = 1;</div><div class="line">        jCol(0) = 0;</div><div class="line"></div><div class="line">        iRow(1) = 2;</div><div class="line">        jCol(1) = 1;</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> sparseHessianValues(<span class="keyword">const</span> Eigen::VectorXd&amp; optVec,</div><div class="line">        <span class="keyword">const</span> Eigen::VectorXd&amp; lambda,</div><div class="line">        Eigen::VectorXd&amp; hes)<span class="keyword"> override</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        hes.resize(nnz_hessian);</div><div class="line">        hes.setConstant(-1.0 * lambda(0));</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    std::shared_ptr&lt;tpl::OptVector&lt;SCALAR&gt;&gt; optVector_;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> SCALAR&gt;</div><div class="line"><span class="keyword">class </span>ExampleConstraintsContainer final : <span class="keyword">public</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1DiscreteConstraintContainerBase.html">tpl::DiscreteConstraintContainerBase</a>&lt;SCALAR&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="line">    ExampleConstraintsContainer(std::shared_ptr&lt;<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1OptVector.html">tpl::OptVector&lt;SCALAR&gt;</a>&gt; optVector) : optVector_(optVector)</div><div class="line">    {</div><div class="line">        this-&gt;constraints_.push_back(</div><div class="line">            std::shared_ptr&lt;<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraints.html">ExampleConstraints&lt;SCALAR&gt;</a>&gt;(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraints.html">ExampleConstraints&lt;SCALAR&gt;</a>(optVector_)));</div><div class="line">    }</div><div class="line">    ~ExampleConstraintsContainer() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> prepareEvaluation()<span class="keyword"> override </span>{ <span class="comment">/* do nothing*/</span>}</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> prepareJacobianEvaluation()<span class="keyword"> override </span>{ <span class="comment">/* do nothing*/</span>}</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    std::shared_ptr&lt;tpl::OptVector&lt;SCALAR&gt;&gt; optVector_;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> SCALAR&gt;</div><div class="line"><span class="keyword">class </span><a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleProblem.html">ExampleProblem</a> final : <span class="keyword">public</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1Nlp.html">tpl::Nlp</a>&lt;SCALAR&gt;</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleProblem.html">ExampleProblem</a>()</div><div class="line">    {</div><div class="line">        this-&gt;optVariables_ = std::shared_ptr&lt;tpl::OptVector&lt;SCALAR&gt;&gt;(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1tpl_1_1OptVector.html">tpl::OptVector&lt;SCALAR&gt;</a>(3));</div><div class="line"></div><div class="line">        this-&gt;optVariables_-&gt;setInitialGuess(Eigen::Vector3d::Identity());</div><div class="line"></div><div class="line">        this-&gt;costEvaluator_ =</div><div class="line">            std::shared_ptr&lt;ExampleCostEvaluator&lt;SCALAR&gt;&gt;(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleCostEvaluator.html">ExampleCostEvaluator&lt;SCALAR&gt;</a>(this-&gt;optVariables_));</div><div class="line"></div><div class="line">        this-&gt;constraints_ = std::shared_ptr&lt;ExampleConstraintsContainer&lt;SCALAR&gt;&gt;(</div><div class="line">            <span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleConstraintsContainer.html">ExampleConstraintsContainer&lt;SCALAR&gt;</a>(this-&gt;optVariables_));</div><div class="line">    }</div><div class="line"></div><div class="line">    ~<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleProblem.html">ExampleProblem</a>() <span class="keyword">override</span> = <span class="keywordflow">default</span>;</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> updateProblem()<span class="keyword"> override </span>{ <span class="comment">/* do nothing */</span>}</div><div class="line"></div><div class="line">    Eigen::VectorXd getSolution() { <span class="keywordflow">return</span> this-&gt;optVariables_-&gt;getOptimizationVars(); }</div><div class="line">};</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_core.tag:../../ct_core/doc/html/" href="../../ct_core/doc/html/CMakeCXXCompilerId_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div><div class="line">{</div><div class="line">    <span class="comment">// create problems</span></div><div class="line">    std::shared_ptr&lt;ExampleProblem&lt;double&gt;&gt; problem1(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleProblem.html">ExampleProblem&lt;double&gt;</a>());</div><div class="line">    std::shared_ptr&lt;ExampleProblem&lt;double&gt;&gt; problem2(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classExampleProblem.html">ExampleProblem&lt;double&gt;</a>());</div><div class="line"></div><div class="line">    <span class="comment">// settings for exact Hessian solver</span></div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html">NlpSolverSettings</a> solverSettings1;</div><div class="line">    solverSettings1.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html#a562ddac0ce47a1b5909a73207a0daa60">solverType_</a> = <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/namespacect_1_1optcon.html#a656a888ffbea3e808f3c80425632ef10a6b93b108ba2eb6ad8ff0473e877e8a66">NlpSolverType::IPOPT</a>;</div><div class="line">    solverSettings1.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html#a3e6de51fa3c9a707a8bc9f2a52d026db">ipoptSettings_</a>.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1IpoptSettings.html#ab91f9329f297495215f335152733ccbd">derivativeTest_</a> = <span class="stringliteral">&quot;second-order&quot;</span>;</div><div class="line">    solverSettings1.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html#a3e6de51fa3c9a707a8bc9f2a52d026db">ipoptSettings_</a>.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1IpoptSettings.html#af88aa103cf1dab27f5776c0dfe29e13f">hessian_approximation_</a> = <span class="stringliteral">&quot;exact&quot;</span>;</div><div class="line"></div><div class="line">    <span class="comment">// create exact-Hessian solver and solve</span></div><div class="line">    std::shared_ptr&lt;NlpSolver&gt; nlpSolver1(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/namespacect_1_1optcon.html#ad3b07bbf23640e1a22ec0cd7f0da11d7">IpoptSolver</a>(problem1, solverSettings1));</div><div class="line">    nlpSolver1-&gt;solve();</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Solution: &quot;</span> &lt;&lt; problem1-&gt;getSolution().transpose() &lt;&lt; std::endl;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">// settings for Hessian approximation solver</span></div><div class="line">    <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html">NlpSolverSettings</a> solverSettings2;</div><div class="line">    solverSettings2.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html#a562ddac0ce47a1b5909a73207a0daa60">solverType_</a> = <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/namespacect_1_1optcon.html#a656a888ffbea3e808f3c80425632ef10a6b93b108ba2eb6ad8ff0473e877e8a66">NlpSolverType::IPOPT</a>;</div><div class="line">    solverSettings2.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1NlpSolverSettings.html#a3e6de51fa3c9a707a8bc9f2a52d026db">ipoptSettings_</a>.<a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/classct_1_1optcon_1_1IpoptSettings.html#af88aa103cf1dab27f5776c0dfe29e13f">hessian_approximation_</a> = <span class="stringliteral">&quot;limited-memory&quot;</span>;</div><div class="line"></div><div class="line">    <span class="comment">// create approximate-Hessian solver and solve</span></div><div class="line">    std::shared_ptr&lt;NlpSolver&gt; nlpSolver2(<span class="keyword">new</span> <a class="codeRef" doxygen="/home/gim2rng/ct_devel_ws/src/control-toolbox/ct_doc/doc/tags/ct_optcon.tag:../../../ct_optcon/doc/html/" href="../../../ct_optcon/doc/html/namespacect_1_1optcon.html#ad3b07bbf23640e1a22ec0cd7f0da11d7">IpoptSolver</a>(problem2, solverSettings2));</div><div class="line">    nlpSolver2-&gt;solve();</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Solution: &quot;</span> &lt;&lt; problem2-&gt;getSolution().transpose() &lt;&lt; std::endl;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p>You can run this example with the following command </p><div class="fragment"><div class="line">rosrun ct_optcon ex_Nlp_3D</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="getting_started.html">Getting Started</a></li><li class="navelem"><a class="el" href="optcon_tutorials.html">ct optcon Tutorials</a></li>
    <li class="footer">Generated on Wed Feb 19 2020 15:15:07 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
